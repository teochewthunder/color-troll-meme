<!DOCTYPE html>
<html>
	<head>
		<title>Color Troll Meme</title>

		<style>
			.ctmContainer
			{
				width: 100%;
				height: 200px;
			}

			.ctm
			{
				width: 300px;
				height: 300px;
				float: left;
				margin-left: 10%;
				margin-top: 10%;
				border-radius: 50%;
			}

			.ctm h1
			{
				margin-top: 50%;
				font-size: 20px;
				text-align: center;
			}
		</style>
	</head>

	<body>
		<div id="ctmApp">
			<div class="ctmContainer">
				<div class="ctm" v-for="ctm in ctms" style="background-color:{{ ctm.color }}">
					<h1 style="color:{{ ctm.textColor }}">{{ ctm.name }}</h1>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js"></script>

		<script>
			var app = new Vue
			(
				{
					el: "#ctmApp",
					data:
					{
						ctms: 
						[
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							}														
						],
						wordTypes:
						{	
							area: 
							[
								"eye",
								"lip",
								"tailbone",
								"fingers",
								"liver",
								"kidney",
								"spleen",
								"colon",
								"knee",
								"hip"
							],
							trollArea: 
							[
								"testicle",
								"anus",
								"vagina",
								"nostril",
								"nipple",
								"groin",
								"penis",
								"labia",
								"cleavage",
								"rectum"
							],
							condition_prefix: 
							[
								"detached",
								"bruised",
								"dislocated",
								"inflamed",
								"inverted",
								"ingrown"
							],
							condition_suffix: 
							[
								"lacerations",
								"tumor",
								"cancer",
								"ulcers",
								"blisters",
								"blockage",
								"fracture",
								"dehydration",
								"ulcers"
							]
						}
					},
					methods:
					{
						fillInfo: function(ctmIndex)
						{
							this.ctms.forEach(
								(ctm, index) => 
								{
									var isLast = (index === this.ctms.length - 1);

									var prefix = (this.getRandomNo(2) === 0);
									var area = (this.getOne(isLast ? this.wordTypes.trollArea : this.wordTypes.area));
									ctm.name = this.getCondition(area, prefix);

									var colorArr = this.getColor(155);
									ctm.color = "rgb(" + colorArr[0] + "," + colorArr[1] + "," + colorArr[2] + ")";

									var opacity = (isLast ? 0.1 : (this.getRandomNo(4) + 5) / 10);
									ctm.textColor = "rgba(255, 255, 255, " + opacity + ")";
								}
							);														
						},
						getColor: function(maxRGB)
						{
							var r = this.getRandomNo(maxRGB);
							var b = this.getRandomNo(maxRGB);
							var g = this.getRandomNo(maxRGB);
							return [r, g, b];
						},
						getCondition: function(area, prefix = true)
						{
							var cond = "";

							if (prefix)
							{
								cond = this.getOne(this.wordTypes.condition_prefix);
								return cond + " " + area;
							} 
							else 
							{
								cond = this.getOne(this.wordTypes.condition_suffix);
								return area + " " + cond;
							}
						},
						getOne: function(arr)
						{
							return arr[this.getRandomNo(arr.length)];
						},
						getRandomNo:function(max)
						{
							return Math.floor(Math.random() * max);
						}
					},
					created: function()
					{
						for (let i = 0; i < this.ctms.length; i++)
						{
							this.fillInfo(i);
						}
					}
				}
			);
		</script>
	</body>
</html>
