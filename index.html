<!DOCTYPE html>
<html>
	<head>
		<title>Color Troll Meme</title>

		<style>
			.ctmContainer
			{
				width: 100%;
				height: 200px;
			}

			.ctm
			{
				width: 300px;
				height: 300px;
				float: left;
				margin-left: 10%;
				margin-top: 10%;
				border-radius: 50%;
			}

			.ctm h1
			{
				margin-top: 40%;
				font-size: 30px;
				text-align: center;
			}
		</style>
	</head>

	<body>
		<div id="ctmApp">
			<div class="ctmContainer">
				<div class="ctm" v-for="ctm in ctms" style="background-color:{{ ctm.color }}">
					<h1 style="color:{{ ctm.textColor }}">{{ ctm.name }}</h1>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js"></script>

		<script>
			var app = new Vue
			(
				{
					el: "#ctmApp",
					data:
					{
						ctms: 
						[
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							},
							{
								name: "",
								color: "",
								textColor: ""
							}														
						],
						inUse:
						[

						],
						wordTypes:
						{	
							area: 
							[
								"testicle",
								"anus",
								"vagina",
								"nipple",
								"groin",
								"penis",
								"labia",
								"cleavage",
								"rectum"
							],
							condition:
							[
								"dehydration",
								"constipation",
								"arthritis",
								"bronchitis",
								"myopia",
								"baldness",
								"pinkeye",
								"narcolepsy",
								"epilepsy",
								"ostereoporosis",
								"dementia",
								"psychosis",
								"indigestion",
								"heartburn"
							],
							condition_prefix: 
							[
								"detached",
								"bruised",
								"inverted",
								"ingrown",
								"misaligned",
								"ruptured"
							],
							condition_suffix: 
							[
								"lacerations",
								"tumor",
								"ulcers",
								"blisters",
								"blockage",
								"fracture",
								"ulcers",
								"inflammation",
								"necrosis",
								"discharge",
								"dysfunction",
								"fungus"
							]
						}
					},
					methods:
					{
						fillInfo: function(ctmIndex)
						{
							this.ctms.forEach(
								(ctm, index) => 
								{
									var isLast = (index === this.ctms.length - 1);

									if (isLast) 
									{
										var prefix = (this.getRandomNo(2) === 0);
										var area = this.getOne(this.wordTypes.area);
										ctm.name = this.getCondition(area, prefix);
									} 
									else
									{
										ctm.name = this.getOne(this.wordTypes.condition);

										while (this.inUse.indexOf(ctm.name) > -1)
										{
											ctm.name = this.getOne(this.wordTypes.condition);
										}
										
										this.inUse.push(ctm.name);
									}
									
									var colorArr = this.getColor(100);
									ctm.color = "rgb(" + colorArr[0] + "," + colorArr[1] + "," + colorArr[2] + ")";

									var opacity = (isLast ? 0.05 : (this.getRandomNo(8) + 2) / 10);
									ctm.textColor = "rgba(" + (colorArr[0] + 150) + "," + (colorArr[1] + 150) + "," + (colorArr[2] + 150) + "," + opacity + ")";
								}
							);														
						},
						getColor: function(maxRGB)
						{
							var r = this.getRandomNo(maxRGB);
							var b = this.getRandomNo(maxRGB);
							var g = this.getRandomNo(maxRGB);
							return [r, g, b];
						},
						getCondition: function(area, prefix = true)
						{
							var cond = "";

							if (prefix)
							{
								cond = this.getOne(this.wordTypes.condition_prefix);
								return cond + " " + area;
							} 
							else 
							{
								cond = this.getOne(this.wordTypes.condition_suffix);
								return area + " " + cond;
							}
						},
						getOne: function(arr)
						{
							return arr[this.getRandomNo(arr.length)];
						},
						getRandomNo:function(max)
						{
							return Math.floor(Math.random() * max);
						}
					},
					created: function()
					{
						this.fillInfo();
					}
				}
			);
		</script>
	</body>
</html>
